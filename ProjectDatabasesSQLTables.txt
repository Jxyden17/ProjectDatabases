/****** Object:  Table [dbo].[ACTIVITY]    Script Date: 15/05/2025 12:49:20 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[ACTIVITY](
	[activity_id] [int] IDENTITY(1,1) NOT NULL,
	[name] [varchar](255) NOT NULL,
	[start_time] [datetime] NOT NULL,
	[end_time] [datetime] NOT NULL,
 CONSTRAINT [PK__ACTIVITY__482FBD63D3530F75] PRIMARY KEY CLUSTERED 
(
	[activity_id] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [IX_ACTIVITY_NAME] UNIQUE NONCLUSTERED 
(
	[name] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO


/****** Object:  Table [dbo].[DORMITORY]    Script Date: 15/05/2025 12:50:04 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[DORMITORY](
	[student_number] [int] NOT NULL,
	[room_id] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[student_number] ASC,
	[room_id] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[DORMITORY]  WITH CHECK ADD FOREIGN KEY([room_id])
REFERENCES [dbo].[ROOM] ([room_id])
GO

ALTER TABLE [dbo].[DORMITORY]  WITH CHECK ADD  CONSTRAINT [FK_Dormitory_Student] FOREIGN KEY([student_number])
REFERENCES [dbo].[STUDENT] ([student_number])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[DORMITORY] CHECK CONSTRAINT [FK_Dormitory_Student]
GO

/****** Object:  Table [dbo].[DRINK]    Script Date: 15/05/2025 12:50:20 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[DRINK](
	[drink_id] [int] NOT NULL,
	[name] [varchar](255) NOT NULL,
	[isAlcoholic] [bit] NOT NULL,
	[stock] [int] NULL,
 CONSTRAINT [PK__DRINK__C661FE9AB77D99E2] PRIMARY KEY CLUSTERED 
(
	[drink_id] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO


/****** Object:  Table [dbo].[ORDER]    Script Date: 15/05/2025 12:50:40 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[ORDER](
	[order_id] [int] IDENTITY(1,1) NOT NULL,
	[student_number] [int] NOT NULL,
	[drink_id] [int] NOT NULL,
	[amount] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[order_id] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[ORDER]  WITH CHECK ADD  CONSTRAINT [FK_ORDER_Drink] FOREIGN KEY([drink_id])
REFERENCES [dbo].[DRINK] ([drink_id])
GO

ALTER TABLE [dbo].[ORDER] CHECK CONSTRAINT [FK_ORDER_Drink]
GO

ALTER TABLE [dbo].[ORDER]  WITH CHECK ADD  CONSTRAINT [FK_ORDER_Student] FOREIGN KEY([student_number])
REFERENCES [dbo].[STUDENT] ([student_number])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[ORDER] CHECK CONSTRAINT [FK_ORDER_Student]
GO


/****** Object:  Table [dbo].[PARTICIPATION]    Script Date: 15/05/2025 12:50:55 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[PARTICIPATION](
	[student_number] [int] NOT NULL,
	[activity_id] [int] NOT NULL,
 CONSTRAINT [PK__PARTICIP__2AF661AEDF743EA0] PRIMARY KEY CLUSTERED 
(
	[student_number] ASC,
	[activity_id] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[PARTICIPATION]  WITH CHECK ADD  CONSTRAINT [FK_Participation_Activity] FOREIGN KEY([activity_id])
REFERENCES [dbo].[ACTIVITY] ([activity_id])
GO

ALTER TABLE [dbo].[PARTICIPATION] CHECK CONSTRAINT [FK_Participation_Activity]
GO

ALTER TABLE [dbo].[PARTICIPATION]  WITH CHECK ADD  CONSTRAINT [FK_PARTICIPATION_Student] FOREIGN KEY([student_number])
REFERENCES [dbo].[STUDENT] ([student_number])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[PARTICIPATION] CHECK CONSTRAINT [FK_PARTICIPATION_Student]
GO

/****** Object:  Table [dbo].[ROOM]    Script Date: 15/05/2025 12:51:16 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[ROOM](
	[room_id] [int] IDENTITY(1,1) NOT NULL,
	[room_number] [varchar](50) NOT NULL,
	[capacity] [int] NOT NULL,
	[type] [varchar](255) NOT NULL,
 CONSTRAINT [PK__ROOM__FE22F61A017DFCA1] PRIMARY KEY CLUSTERED 
(
	[room_id] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

/****** Object:  Table [dbo].[STUDENT]    Script Date: 15/05/2025 12:51:36 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[STUDENT](
	[student_number] [int] IDENTITY(1,1) NOT NULL,
	[room_id] [int] NOT NULL,
	[first_name] [varchar](255) NOT NULL,
	[last_name] [varchar](255) NOT NULL,
	[phone_number] [varchar](20) NOT NULL,
	[class] [varchar](50) NOT NULL,
 CONSTRAINT [PK__STUDENT__0E749A7886E5E6F3] PRIMARY KEY CLUSTERED 
(
	[student_number] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO


/****** Object:  Table [dbo].[SUPERVISOR]    Script Date: 15/05/2025 12:51:47 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[SUPERVISOR](
	[teacher_id] [int] NOT NULL,
	[activity_id] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[teacher_id] ASC,
	[activity_id] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[SUPERVISOR]  WITH CHECK ADD  CONSTRAINT [FK__SUPERVISO__activ__6EF57B66] FOREIGN KEY([activity_id])
REFERENCES [dbo].[ACTIVITY] ([activity_id])
GO

ALTER TABLE [dbo].[SUPERVISOR] CHECK CONSTRAINT [FK__SUPERVISO__activ__6EF57B66]
GO

ALTER TABLE [dbo].[SUPERVISOR]  WITH CHECK ADD  CONSTRAINT [FK__SUPERVISO__teach__6E01572D] FOREIGN KEY([teacher_id])
REFERENCES [dbo].[TEACHER] ([teacher_id])
GO

ALTER TABLE [dbo].[SUPERVISOR] CHECK CONSTRAINT [FK__SUPERVISO__teach__6E01572D]
GO


/****** Object:  Table [dbo].[TEACHER]    Script Date: 15/05/2025 12:51:58 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[TEACHER](
	[teacher_id] [int] IDENTITY(1,1) NOT NULL,
	[room_id] [int] NOT NULL,
	[first_name] [varchar](255) NOT NULL,
	[last_name] [varchar](255) NOT NULL,
	[phone_number] [varchar](20) NOT NULL,
	[age] [int] NOT NULL,
 CONSTRAINT [PK__TEACHER__03AE777E9F9BBDD6] PRIMARY KEY CLUSTERED 
(
	[teacher_id] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ__TEACHER__19675A8B42705A66] UNIQUE NONCLUSTERED 
(
	[room_id] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ_TeacherName] UNIQUE NONCLUSTERED 
(
	[first_name] ASC,
	[last_name] ASC
)WITH (STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO


